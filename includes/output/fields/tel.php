<?php
/**
	* --------------------------------------------------------------------------
	*	@author			Hossein Mohammadi Makalvani
	*	@copyright		Copyright (C) 2014 - 2017 Digarsoo. All rights reserved.
	*	creation date	06/15/2015
	*	last edit		08/24/2015
	* --------------------------------------------------------------------------
*/

defined('_ALLOW') or die("access denied!");

class TelField {
	public static function output($name , $tabindex , $default , $children , $attributes , $fields_name , $placeholder)
	{
		Templates::package('select2');
		Templates::add_js('jQuery(document).ready(function(){jQuery(".' . $name . '-area").select2({dir: "ltr" , templateResult: formatState});function formatState(state){if(!state.id){return state.text;}var $state=jQuery(\'<span><img style="width: 30px; position: relative; top: 5px; margin-right: 10px;" src="' . Site::$base . 'media/images/flags/\' + get_country(state.element.value.toLowerCase()) + \'.jpg" class="img-flag" /> \' + state.text + \'</span>\');return $state;};});function get_country(number){switch(number){case "93":return "af";case "358":return "ax";case "355":return "al";case "213":return "dz";case "1684":return "as";case "376":return "ad";case "244":return "ao";case "1264":return "ai";case "1268":return "ag";case "54":return "ar";case "347":return "am";case "297":return "aw";case "61":return "au";case "43":return "at";case "994":return "az";case "1242":return "bs";case "973":return "bx";case "880":return "bd";case "1-bb":return "bb";case "375":return "by";case "32":return "be";case "501":return "bz";case "229":return "bj";case "1441":return "bm";case "975":return "bt";case "591":return "bo";case "599":return "nl";case "387":return "ba";case "267":return "bw";case "55":return "br";case "246":return "io";case "673":return "bn";case "359":return "bg";case "226":return "bf";case "257":return "bi";case "855":return "kh";case "237":return "cm";case "1-ca":return "ca";case "238":return "cv";case "1345":return "ky";case "236":return "cf";case "235":return "td";case "56":return "cl";case "86":return "cn";case "61":return "cx";case "61891":return "cc";case "57":return "co";case "269":return "km";case "682":return "ck";case "506":return "cr";case "225":return "ci";case "385":return "hr";case "53":return "cu";case "5999":return "cw";case "357":return "cy";case "420":return "cz";case "243":return "cd";case "45":return "dk";case "253":return "dj";case "1767":return "dm";case "1809":case "1829":case "1849":return "do";case "670":return "tl";case "593":return "ec";case "20":return "eg";case "503":return "sv";case "240":return "gq";case "291":return "er";case "372":return "ee";case "251":return "et";case "500":return "fk";case "298":return "fo";case "697":return "fj";case "358":return "fi";case "33":return "fr";case "594":return "gf";case "689":return "pf";case "241":return "ga";case "220":return "gm";case "995":return "ge";case "49":return "de";case "233":return "gh";case "350":return "gi";case "30":return "gr";case "299":return "gl";case "1473":return "gd";case "1671":return "gu";case "502":return "gt";case "441481":return "gg";case "224":return "gn";case "245":return "gw";case "592":return "gy";case "509":return "ht";case "504":return "hn";case "852":return "hk";case "36":return "hu";case "354":return "is";case "91":return "in";case "62":return "id";case "98":return "ir";case "964":return "iq";case "353":return "ie";case "441624":return "im";case "972":return "il";case "39":return "it";case "1876":return "jm";case "81":return "jp";case "44-je":return "je";case "962":return "jo";case "7-kz":return "kz";case "254":return "ke";case "686":return "ki";case "965":return "kw";case "996":return "kg";case "856":return "la";case "371":return "lv";case "961":return "lb";case "266":return "ls";case "231":return "lr";case "218":return "ly";case "423":return "li";case "370":return "lt";case "352":return "lu";case "853":return "mo";case "389":return "mk";case "261":return "mg";case "265":return "mw";case "60":return "my";case "960":return "mv";case "223":return "ml";case "356":return "mt";case "692":return "mh";case "222":return "mr";case "230":return "mu";case "262":return "yt";case "52":return "mx";case "691":return "fm";case "373":return "md";case "377":return "mc";case "976":return "mn";case "382":return "me";case "1664":return "ms";case "212":return "ma";case "258":return "mz";case "95":return "mm";case "264":return "na";case "674":return "nr";case "977":return "np";case "31":return "nl";case "687":return "nc";case "64":return "nz";case "505":return "ni";case "227":return "ne";case "234":return "ng";case "683":return "nu";case "672":return "nf";case "850":return "kp";case "1670":return "mp";case "47":return "no";case "968":return "om";case "92":return "pk";case "680":return "pw";case "970":return "ps";case "507":return "pa";case "675":return "pg";case "595":return "py";case "51":return "pe";case "63":return "ph";case "64":return "pn";case "48":return "pl";case "351":return "pt";case "1787":case "1939":return "pr";case "974":return "qa";case "242":return "cg";case "40":return "ro";case "7":return "ru";case "250":return "rw";case "590":return "bl";case "290":return "sh";case "1869":return "kn";case "1758":return "lc";case "590":return "mf";case "508":return "pm";case "1784":return "vc";case "685":return "ws";case "378":return "sm";case "239":return "st";case "966":return "sa";case "221":return "sn";case "381":return "rs";case "248":return "sc";case "232":return "sl";case "65":return "sg";case "1721":return "sx";case "421":return "sk";case "386":return "si";case "677":return "sb";case "252":return "so";case "27":return "za";case "82":return "kr";case "211":return "ss";case "34":return "es";case "94":return "lk";case "249":return "sd";case "597":return "sr";case "268":return "sz";case "46":return "se";case "41":return "ch";case "963":return "sy";case "886":return "tw";case "992":return "tj";case "255":return "tz";case "66":return "th";case "228":return "tg";case "690":return "tk";case "676":return "to";case "1868":return "tt";case "216":return "tn";case "90":return "tr";case "993":return "tm";case "1649":return "tc";case "688":return "tv";case "256":return "ug";case "380":return "ua";case "971":return "ae";case "44":return "uk";case "1":return "us";case "598":return "uy";case "998":return "uz";case "678":return "vu";case "379":return "va";case "58":return "ve";case "84":return "vn";case "1284":return "vg";case "1-vi":return "vi";case "681":return "wf";case "212":return "eh";case "967":return "ye";case "260":return "zm";case "263":return "zv";}}' , true);
		Templates::package('tel');

		$output = "<div class=\"tel xa\">";

		$output .= "<input class=\"input-hidden-tel\" type=\"hidden\" name=\"field_input_" . $name . "\" value=\"" . $default . "\">";
		$output .= "<input class=\"tel-code\" type=\"text\" name=\"" . $name . "-code\" " . ($placeholder ? "placeholder=\"" . Language::_($fields_name . strtoupper($name)) . "\"" : "") . ">";
		$output .= "<select class=\"" . $name . "-area tel-area-code\">";
		foreach (array("Afghanistan" => "93" , "Aland Islands" => "358" , "Albania" => "355" , "Algeria" => "213" , "American Samoa" => "1684" , "Andorra" => "376" , "Angola" => "244" , "Anguilla" => "1264" , "Antigua and Barbuda" => "1268" , "Argentina" => "54" , "Armenia" => "347" , "Aruba" => "297" , "Australia" => "61" , "Austria" => "43" , "Azerbaijan" => "994" , "Bahamas" => "1242" , "Bahrain" => "973" , "Bangladesh" => "880" , "Barbados" => "1-bb" , "Belarus" => "375" , "Belgium" => "32" , "Belize" => "501" , "Benin" => "229" , "Bermuda" => "1441" , "Bhutan" => "975" , "Bolivia" => "591" , "Bonaire" => "599" , "Bosnia and Herzegovina" => "387" , "Botswana" => "267" , "Brazil" => "55" , "British Indian Ocean Territory" => "246" , "Brunei" => "673" , "Bulgaria" => "359" , "Burkina Faso" => "226" , "Burundi" => "257" , "Cambodia" => "855" , "Cameroon" => "237" , "Canada" => "1-ca" , "Cape Verde" => "238" , "Cayman Islands" => "1345" , "Central African Republic" => "236" , "Chad" => "235" , "Chile" => "56" , "China" => "86" , "Christmas Island" => "61" , "Cocos Islands" => "61891" , "Colombia" => "57" , "Comoros" => "269" , "Cook Islands" => "682" , "Costa Rica" => "506" , "Cote d'Ivoire" => "225" , "Croatia" => "385" , "Cuba" => "53" , "Curacao" => "5999" , "Cyprus" => "357" , "Czech Republic" => "420" , "Democratic Republic of the Congo" => "243" , "Denmark" => "45" , "Djibouti" => "253" , "Dominica" => "1767" , "Dominican Republic" => "1809" , "Dominican Republic" => "1829" , "Dominican Republic" => "1849" , "East Timor" => "670" , "Ecuador" => "593" , "Egypt" => "20" , "El Salvador" => "503" , "Equatorial Guinea" => "240" , "Eritrea" => "291" , "Estonia" => "372" , "Ethiopia" => "251" , "Falkland Islands" => "500" , "Faroe Islands" => "298" , "Fiji" => "697" , "Finland" => "358" , "France" => "33" , "French Guiana" => "594" , "French Polynesia" => "689" , "Gabon" => "241" , "Gambia" => "220" , "Georgia" => "995" , "Germany" => "49" , "Ghana" => "233" , "Gibraltar" => "350" , "Greece" => "30" , "Greenland" => "299" , "Grenada" => "1473" , "Guam" => "1671" , "Guatemala" => "502" , "Guernsey" => "441481" , "Guinea" => "224" , "GuineaBissau" => "245" , "Guyana" => "592" , "Haiti" => "509" , "Honduras" => "504" , "Hong Kong" => "852" , "Hungary" => "36" , "Iceland" => "354" , "India" => "91" , "Indonesia" => "62" , "Iran" => "98" , "Iraq" => "964" , "Ireland" => "353" , "Isle of Man" => "441624" , "Italy" => "39" , "Jamaica" => "1876" , "Japan" => "81" , "Jersey" => "44-je" , "Jordan" => "962" , "Kazakhstan" => "7-kz" , "Kenya" => "254" , "Kiribati" => "686" , "Kuwait" => "965" , "Kyrgyzstan" => "996" , "Laos" => "856" , "Latvia" => "371" , "Lebanon" => "961" , "Lesotho" => "266" , "Liberia" => "231" , "Libya" => "218" , "Liechtenstein" => "423" , "Lithuania" => "370" , "Luxembourg" => "352" , "Macao" => "853" , "Macedonia" => "389" , "Madagascar" => "261" , "Malawi" => "265" , "Malaysia" => "60" , "Maldives" => "960" , "Mali" => "223" , "Malta" => "356" , "Marshall Islands" => "692" , "Mauritania" => "222" , "Mauritius" => "230" , "Mayotte" => "262" , "Mexico" => "52" , "Micronesia" => "691" , "Moldova" => "373" , "Monaco" => "377" , "Mongolia" => "976" , "Montenegro" => "382" , "Montserrat" => "1664" , "Morocco" => "212" , "Mozambique" => "258" , "Myanmar" => "95" , "Namibia" => "264" , "Nauru" => "674" , "Nepal" => "977" , "Netherlands" => "31" , "New Caledonia" => "687" , "New Zealand" => "64" , "Nicaragua" => "505" , "Niger" => "227" , "Nigeria" => "234" , "Niue" => "683" , "Norfolk Island" => "672" , "North Korea" => "850" , "Northern Mariana Islands" => "1670" , "Norway" => "47" , "Oman" => "968" , "Pakistan" => "92" , "Palau" => "680" , "Palestinian territories" => "970" , "Panama" => "507" , "Papua New Guinea" => "675" , "Paraguay" => "595" , "Peru" => "51" , "Philippines" => "63" , "Pitcairn Islands" => "64" , "Poland" => "48" , "Portugal" => "351" , "Puerto Rico" => "1787" , "Puerto Rico" => "1939" , "Qatar" => "974" , "Republic of the Congo" => "242" , "Romania" => "40" , "Russia" => "7" , "Rwanda" => "250" , "Saint Barthelemy" => "590" , "Saint Helena" => "290" , "Saint Kitts and Nevis" => "1869" , "Saint Lucia" => "1758" , "Saint Martin" => "590" , "Saint Pierre and Miquelon" => "508" , "Saint Vincent and the Grenadines" => "1784" , "Samoa" => "685" , "San Marino" => "378" , "Sao Tome and Principe" => "239" , "Saudi Arabia" => "966" , "Senegal" => "221" , "Serbia" => "381" , "Seychelles" => "248" , "Sierra Leone" => "232" , "Singapore" => "65" , "Sint Maarten" => "1721" , "Slovakia" => "421" , "Slovenia" => "386" , "Solomon Islands" => "677" , "Somalia" => "252" , "South Africa" => "27" , "South Korea" => "82" , "South Sudan" => "211" , "Spain" => "34" , "Sri Lanka" => "94" , "Sudan" => "249" , "Suriname" => "597" , "Swaziland" => "268" , "Sweden" => "46" , "Switzerland" => "41" , "Syria" => "963" , "Taiwan" => "886" , "Tajikistan" => "992" , "Tanzania" => "255" , "Thailand" => "66" , "Togo" => "228" , "Tokelau" => "690" , "Tonga" => "676" , "Trinidad and Tobago" => "1868" , "Tunisia" => "216" , "Turkey" => "90" , "Turkmenistan" => "993" , "Turks and Caicos Islands" => "1649" , "Tuvalu" => "688" , "Uganda" => "256" , "Ukraine" => "380" , "United Arab Emirates" => "971" , "United Kingdom" => "44" , "United States of America" => "1" , "Uruguay" => "598" , "Uzbekistan" => "998" , "Vanuatu" => "678" , "Vatican City" => "379" , "Venezuela" => "58" , "Vietnam" => "84" , "Virgin Islands" => "1284" , "Virgin Islands of the United States" => "1-vi" , "Wallis and Futuna" => "681" , "Western Sahara" => "212" , "Yemen" => "967" , "Zambia" => "260" , "Zimbabwe" => "263") as $key => $value)
			$output .= "<option value=\"" . $value . "\">" . ucwords($key) . "</option>";
		$output .= "</select>";

		if(isset($children['warning']) && $children['warning'] == true)
			$output .= "<div class=\"tel-warning xa\"><span class=\"icon-warning\"></span>" . Language::_('WARNING_TEL') . "</div>";

		$output .= "</div>";

		return $output;
	}
}